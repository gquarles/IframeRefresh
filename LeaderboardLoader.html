<html>

<head>

    <title>Iframe Automatic Refresh</title>

    <script>



        function getQueryVariable(variable)

        {

            var query = window.location.search.substring(1);

            var vars = query.split("&");

            for (var i=0;i<vars.length;i++) {

                var pair = vars[i].split("=");

                if(pair[0] == variable){return pair[1];}

            }

            return(false);

        }



        var tournid = getQueryVariable("tournid");

        var shownum = getQueryVariable("shownum");



        var source = "https://nasptournaments.org/leaderboard.aspx?tid=" + tournid + "&shownum=" + shownum;

        var refreshTime = 180000;



        window.setInterval("reloadIFrame();", refreshTime);
        window.setInterval("checkLoaded();", 5000);


        function reloadIFrame() {

            document.getElementById("iframeID").src=source;

        }

        function checkLoaded() {

            //var frameLoaded = document.getElementById("iframeID");
            //parent.frameLoaded = window;
            //alert(frameLoaded.isloaded);
            var isloaded = document.getElementById('iframeID').contentWindow['isloaded'];

            if (isloaded != "true") {

                document.getElementById("iframeID").src = source;

            } 

        }

    </script>

</head>

<body>

    <div id="content">

        <script>

            document.write("<iframe id='iframeID' src='" + source + "' style='position:fixed; top:0px; bottom:0px; right:0px; width: 100%; border: none; margin:0; padding:0; overflow: hidden; z-index:999999; height: 100%;'>");

        </script>

    </div>

</body>

</html>